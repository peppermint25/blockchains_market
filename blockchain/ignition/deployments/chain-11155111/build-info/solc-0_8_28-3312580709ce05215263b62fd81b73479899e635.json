{
  "_format": "hh3-sol-build-info-1",
  "id": "solc-0_8_28-3312580709ce05215263b62fd81b73479899e635",
  "solcVersion": "0.8.28",
  "solcLongVersion": "0.8.28+commit.7893614a",
  "userSourceNameMap": {
    "contracts/DonationPlatform.sol": "project/contracts/DonationPlatform.sol"
  },
  "input": {
    "language": "Solidity",
    "settings": {
      "evmVersion": "cancun",
      "optimizer": {
        "enabled": true,
        "runs": 50
      },
      "outputSelection": {
        "*": {
          "": [
            "ast"
          ],
          "*": [
            "abi",
            "evm.bytecode",
            "evm.deployedBytecode",
            "evm.methodIdentifiers",
            "metadata"
          ]
        }
      },
      "remappings": []
    },
    "sources": {
      "project/contracts/DonationPlatform.sol": {
        "content": "// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.19;\r\n\r\ncontract SecondhandMarket {\r\n    \r\n    // === ROLES ===\r\n    address public admin;\r\n    mapping(address => bool) public admins;\r\n    address[] public adminList;\r\n    \r\n    // === ENUMS ===\r\n    enum ListingStatus { Active, Sold, Cancelled }\r\n    enum OrderStatus { AwaitingShipment, Shipped, Delivered, Completed, Disputed, Refunded }\r\n    enum Category { Clothing, HouseGoods, Electronics, SportsGoods, Hobbies }\r\n    enum GoalStatus { Active, Completed, Cancelled }\r\n    enum ItemRequestStatus { Active, Fulfilled, Cancelled }\r\n    \r\n    // === STRUCTS ===\r\n    struct Listing {\r\n        uint256 id;\r\n        address payable seller;\r\n        string metadataURI;\r\n        uint256 price;\r\n        Category category;\r\n        ListingStatus status;\r\n        address charity;\r\n    }\r\n    \r\n    struct Order {\r\n        uint256 id;\r\n        uint256 listingId;\r\n        address payable buyer;\r\n        address payable seller;\r\n        address charity;\r\n        uint256 amount;\r\n        OrderStatus status;\r\n        uint256 shippedAt;\r\n        uint256 deliveredAt;\r\n        string disputeReason;\r\n    }\r\n    \r\n    struct Charity {\r\n        address charityAddress;\r\n        string metadataURI;\r\n        bool isVerified;\r\n        uint256 totalReceived;\r\n    }\r\n    \r\n    struct Goal {\r\n        uint256 id;\r\n        address charity;\r\n        string metadataURI;\r\n        uint256 targetAmount;\r\n        uint256 currentAmount;\r\n        GoalStatus status;\r\n        uint256 deadline;\r\n    }\r\n    \r\n    struct ItemRequest {\r\n        uint256 id;\r\n        address charity;\r\n        string metadataURI;\r\n        Category category;\r\n        ItemRequestStatus status;\r\n        uint256 fulfilledCount;\r\n    }\r\n    \r\n    // === STORAGE ===\r\n    mapping(uint256 => Listing) public listings;\r\n    mapping(uint256 => Order) public orders;\r\n    mapping(address => uint256) public charityIndex;\r\n    mapping(address => bool) public verifiedCharities;\r\n    mapping(address => uint256[]) public sellerListings;\r\n    mapping(address => uint256[]) public buyerOrders;\r\n    mapping(address => uint256[]) public charityGoals;\r\n    mapping(address => uint256[]) public charityItemRequests;\r\n    \r\n    Charity[] public charities;\r\n    Goal[] public goals;\r\n    ItemRequest[] public itemRequests;\r\n    \r\n    uint256 public listingCount;\r\n    uint256 public orderCount;\r\n    \r\n    uint256 public constant DISPUTE_WINDOW = 14 days;\r\n    \r\n    // === EVENTS ===\r\n    event AdminAdded(address indexed newAdmin, address indexed addedBy);\r\n    event AdminRemoved(address indexed removedAdmin, address indexed removedBy);\r\n    event CharityAdded(uint256 indexed charityId, address indexed charityAddress, string metadataURI);\r\n    event CharityUpdated(uint256 indexed charityId, address indexed charityAddress, bool isVerified);\r\n    event ListingCreated(uint256 indexed listingId, address indexed seller, uint256 price, Category category);\r\n    event ListingCancelled(uint256 indexed listingId);\r\n    event ListingCancelledByAdmin(uint256 indexed listingId, address indexed admin);\r\n    event ItemPurchased(uint256 indexed orderId, uint256 indexed listingId, address indexed buyer);\r\n    event ItemShipped(uint256 indexed orderId, address indexed seller);\r\n    event DeliveryConfirmed(uint256 indexed orderId, address indexed buyer);\r\n    event FundsReleasedToCharity(uint256 indexed orderId, address indexed charity, uint256 amount);\r\n    event DisputeOpened(uint256 indexed orderId, address indexed buyer, string reason);\r\n    event DisputeResolved(uint256 indexed orderId, bool refunded);\r\n    event RefundIssued(uint256 indexed orderId, address indexed buyer, uint256 amount);\r\n    event ItemDonatedToCharity(uint256 indexed listingId, address indexed seller, address indexed charity);\r\n    event GoalCreated(uint256 indexed goalId, address indexed charity, uint256 targetAmount);\r\n    event GoalUpdated(uint256 indexed goalId, uint256 currentAmount, GoalStatus status);\r\n    event ItemRequestCreated(uint256 indexed requestId, address indexed charity, Category category);\r\n    event ItemRequestFulfilled(uint256 indexed requestId, address indexed donor, uint256 listingId);\r\n    event ItemRequestStatusChanged(uint256 indexed requestId, ItemRequestStatus status);\r\n    \r\n    // === MODIFIERS ===\r\n    modifier onlyAdmin() {\r\n        require(msg.sender == admin || admins[msg.sender], \"Only admin can do this\");\r\n        _;\r\n    }\r\n    \r\n    modifier onlyPrimaryAdmin() {\r\n        require(msg.sender == admin, \"Only primary admin can do this\");\r\n        _;\r\n    }\r\n    \r\n    modifier onlyVerifiedCharity() {\r\n        require(verifiedCharities[msg.sender], \"Only verified charity can do this\");\r\n        _;\r\n    }\r\n    \r\n    modifier onlyBuyer(uint256 _orderId) {\r\n        require(msg.sender == orders[_orderId].buyer, \"Only buyer can do this\");\r\n        _;\r\n    }\r\n    \r\n    modifier onlySeller(uint256 _orderId) {\r\n        require(msg.sender == orders[_orderId].seller, \"Only seller can do this\");\r\n        _;\r\n    }\r\n    \r\n    // === CONSTRUCTOR ===\r\n    constructor() {\r\n        admin = msg.sender;\r\n        admins[msg.sender] = true;\r\n        adminList.push(msg.sender);\r\n    }\r\n    \r\n    // === ADMIN MANAGEMENT FUNCTIONS ===\r\n    \r\n    function addAdmin(address _newAdmin) external onlyAdmin {\r\n        require(_newAdmin != address(0), \"Invalid address\");\r\n        require(!admins[_newAdmin], \"Already an admin\");\r\n        \r\n        admins[_newAdmin] = true;\r\n        adminList.push(_newAdmin);\r\n        emit AdminAdded(_newAdmin, msg.sender);\r\n    }\r\n    \r\n    function removeAdmin(address _adminToRemove) external onlyAdmin {\r\n        require(_adminToRemove != admin, \"Cannot remove primary admin\");\r\n        require(_adminToRemove != msg.sender, \"Cannot remove yourself\");\r\n        require(admins[_adminToRemove], \"Not an admin\");\r\n        \r\n        admins[_adminToRemove] = false;\r\n        \r\n        // Remove from array\r\n        for (uint256 i = 0; i < adminList.length; i++) {\r\n            if (adminList[i] == _adminToRemove) {\r\n                adminList[i] = adminList[adminList.length - 1];\r\n                adminList.pop();\r\n                break;\r\n            }\r\n        }\r\n        \r\n        emit AdminRemoved(_adminToRemove, msg.sender);\r\n    }\r\n    \r\n    function isAdminAddress(address _addr) external view returns (bool) {\r\n        return _addr == admin || admins[_addr];\r\n    }\r\n    \r\n    function getAllAdmins() external view returns (address[] memory) {\r\n        return adminList;\r\n    }\r\n    \r\n    function getAdminCount() external view returns (uint256) {\r\n        return adminList.length;\r\n    }\r\n    \r\n    function getPrimaryAdmin() external view returns (address) {\r\n        return admin;\r\n    }\r\n    \r\n    // === ADMIN FUNCTIONS ===\r\n    \r\n    function addCharity(\r\n        address _charityAddress,\r\n        string calldata _metadataURI\r\n    ) external onlyAdmin returns (uint256) {\r\n        require(_charityAddress != address(0), \"Invalid address\");\r\n        require(!verifiedCharities[_charityAddress], \"Charity already exists\");\r\n        \r\n        uint256 charityId = charities.length;\r\n        \r\n        charities.push(Charity({\r\n            charityAddress: _charityAddress,\r\n            metadataURI: _metadataURI,\r\n            isVerified: true,\r\n            totalReceived: 0\r\n        }));\r\n        \r\n        charityIndex[_charityAddress] = charityId;\r\n        verifiedCharities[_charityAddress] = true;\r\n        \r\n        emit CharityAdded(charityId, _charityAddress, _metadataURI);\r\n        return charityId;\r\n    }\r\n    \r\n    function updateCharity(\r\n        address _charityAddress,\r\n        string calldata _metadataURI,\r\n        bool _isVerified\r\n    ) external onlyAdmin {\r\n        require(charityIndex[_charityAddress] > 0 || charities[0].charityAddress == _charityAddress, \"Charity not found\");\r\n        \r\n        uint256 idx = charityIndex[_charityAddress];\r\n        charities[idx].metadataURI = _metadataURI;\r\n        charities[idx].isVerified = _isVerified;\r\n        verifiedCharities[_charityAddress] = _isVerified;\r\n        \r\n        emit CharityUpdated(idx, _charityAddress, _isVerified);\r\n    }\r\n    \r\n    function adminCancelListing(uint256 _listingId) external onlyAdmin {\r\n        Listing storage listing = listings[_listingId];\r\n        require(listing.status == ListingStatus.Active, \"Listing not active\");\r\n        \r\n        listing.status = ListingStatus.Cancelled;\r\n        emit ListingCancelledByAdmin(_listingId, msg.sender);\r\n    }\r\n    \r\n    function transferPrimaryAdmin(address _newAdmin) external onlyPrimaryAdmin {\r\n        require(_newAdmin != address(0), \"Invalid address\");\r\n        require(_newAdmin != admin, \"Already primary admin\");\r\n        \r\n        // Add new admin if not already\r\n        if (!admins[_newAdmin]) {\r\n            admins[_newAdmin] = true;\r\n            adminList.push(_newAdmin);\r\n        }\r\n        \r\n        admin = _newAdmin;\r\n    }\r\n    \r\n    // === CHARITY FUNCTIONS ===\r\n    \r\n    function createGoal(\r\n        string calldata _metadataURI,\r\n        uint256 _targetAmount,\r\n        uint256 _deadline\r\n    ) external onlyVerifiedCharity returns (uint256) {\r\n        require(_targetAmount > 0, \"Target must be greater than 0\");\r\n        require(_deadline > block.timestamp, \"Deadline must be in future\");\r\n        \r\n        uint256 goalId = goals.length;\r\n        \r\n        goals.push(Goal({\r\n            id: goalId,\r\n            charity: msg.sender,\r\n            metadataURI: _metadataURI,\r\n            targetAmount: _targetAmount,\r\n            currentAmount: 0,\r\n            status: GoalStatus.Active,\r\n            deadline: _deadline\r\n        }));\r\n        \r\n        charityGoals[msg.sender].push(goalId);\r\n        \r\n        emit GoalCreated(goalId, msg.sender, _targetAmount);\r\n        return goalId;\r\n    }\r\n    \r\n    function cancelGoal(uint256 _goalId) external onlyVerifiedCharity {\r\n        Goal storage goal = goals[_goalId];\r\n        require(goal.charity == msg.sender, \"Not your goal\");\r\n        require(goal.status == GoalStatus.Active, \"Goal not active\");\r\n        \r\n        goal.status = GoalStatus.Cancelled;\r\n        emit GoalUpdated(_goalId, goal.currentAmount, GoalStatus.Cancelled);\r\n    }\r\n    \r\n    function createItemRequest(\r\n        string calldata _metadataURI,\r\n        Category _category\r\n    ) external onlyVerifiedCharity returns (uint256) {\r\n        uint256 requestId = itemRequests.length;\r\n        \r\n        itemRequests.push(ItemRequest({\r\n            id: requestId,\r\n            charity: msg.sender,\r\n            metadataURI: _metadataURI,\r\n            category: _category,\r\n            status: ItemRequestStatus.Active,\r\n            fulfilledCount: 0\r\n        }));\r\n        \r\n        charityItemRequests[msg.sender].push(requestId);\r\n        \r\n        emit ItemRequestCreated(requestId, msg.sender, _category);\r\n        return requestId;\r\n    }\r\n    \r\n    function cancelItemRequest(uint256 _requestId) external onlyVerifiedCharity {\r\n        ItemRequest storage request = itemRequests[_requestId];\r\n        require(request.charity == msg.sender, \"Not your request\");\r\n        require(request.status == ItemRequestStatus.Active, \"Request not active\");\r\n        \r\n        request.status = ItemRequestStatus.Cancelled;\r\n        emit ItemRequestStatusChanged(_requestId, ItemRequestStatus.Cancelled);\r\n    }\r\n    \r\n    function markItemRequestFulfilled(uint256 _requestId) external onlyVerifiedCharity {\r\n        ItemRequest storage request = itemRequests[_requestId];\r\n        require(request.charity == msg.sender, \"Not your request\");\r\n        require(request.status == ItemRequestStatus.Active, \"Request not active\");\r\n        \r\n        request.status = ItemRequestStatus.Fulfilled;\r\n        emit ItemRequestStatusChanged(_requestId, ItemRequestStatus.Fulfilled);\r\n    }\r\n    \r\n    // === SELLER FUNCTIONS ===\r\n    \r\n    function createListing(\r\n        string calldata _metadataURI,\r\n        uint256 _price,\r\n        Category _category,\r\n        address _charity\r\n    ) external returns (uint256) {\r\n        require(_price > 0, \"Price must be greater than 0\");\r\n        require(verifiedCharities[_charity], \"Charity not verified\");\r\n        \r\n        uint256 listingId = listingCount++;\r\n        \r\n        listings[listingId] = Listing({\r\n            id: listingId,\r\n            seller: payable(msg.sender),\r\n            metadataURI: _metadataURI,\r\n            price: _price,\r\n            category: _category,\r\n            status: ListingStatus.Active,\r\n            charity: _charity\r\n        });\r\n        \r\n        sellerListings[msg.sender].push(listingId);\r\n        \r\n        emit ListingCreated(listingId, msg.sender, _price, _category);\r\n        return listingId;\r\n    }\r\n    \r\n    function cancelListing(uint256 _listingId) external {\r\n        Listing storage listing = listings[_listingId];\r\n        require(msg.sender == listing.seller, \"Only seller can cancel\");\r\n        require(listing.status == ListingStatus.Active, \"Listing not active\");\r\n        \r\n        listing.status = ListingStatus.Cancelled;\r\n        emit ListingCancelled(_listingId);\r\n    }\r\n    \r\n    function confirmShipment(uint256 _orderId) external onlySeller(_orderId) {\r\n        Order storage order = orders[_orderId];\r\n        require(order.status == OrderStatus.AwaitingShipment, \"Invalid order status\");\r\n        \r\n        order.status = OrderStatus.Shipped;\r\n        order.shippedAt = block.timestamp;\r\n        \r\n        emit ItemShipped(_orderId, msg.sender);\r\n    }\r\n    \r\n    function donateItemToCharity(\r\n        string calldata _metadataURI,\r\n        Category _category,\r\n        address _charity\r\n    ) external returns (uint256) {\r\n        require(verifiedCharities[_charity], \"Charity not verified\");\r\n        \r\n        uint256 listingId = listingCount++;\r\n        \r\n        listings[listingId] = Listing({\r\n            id: listingId,\r\n            seller: payable(msg.sender),\r\n            metadataURI: _metadataURI,\r\n            price: 0,\r\n            category: _category,\r\n            status: ListingStatus.Sold,\r\n            charity: _charity\r\n        });\r\n        \r\n        sellerListings[msg.sender].push(listingId);\r\n        \r\n        emit ItemDonatedToCharity(listingId, msg.sender, _charity);\r\n        return listingId;\r\n    }\r\n    \r\n    function donateItemForRequest(\r\n        string calldata _metadataURI,\r\n        uint256 _requestId\r\n    ) external returns (uint256) {\r\n        ItemRequest storage request = itemRequests[_requestId];\r\n        require(request.status == ItemRequestStatus.Active, \"Request not active\");\r\n        \r\n        uint256 listingId = listingCount++;\r\n        \r\n        listings[listingId] = Listing({\r\n            id: listingId,\r\n            seller: payable(msg.sender),\r\n            metadataURI: _metadataURI,\r\n            price: 0,\r\n            category: request.category,\r\n            status: ListingStatus.Sold,\r\n            charity: request.charity\r\n        });\r\n        \r\n        sellerListings[msg.sender].push(listingId);\r\n        request.fulfilledCount++;\r\n        \r\n        emit ItemDonatedToCharity(listingId, msg.sender, request.charity);\r\n        emit ItemRequestFulfilled(_requestId, msg.sender, listingId);\r\n        return listingId;\r\n    }\r\n    \r\n    // === BUYER FUNCTIONS ===\r\n    \r\n    function purchaseItem(uint256 _listingId) external payable returns (uint256) {\r\n        Listing storage listing = listings[_listingId];\r\n        require(listing.status == ListingStatus.Active, \"Listing not available\");\r\n        require(msg.value == listing.price, \"Incorrect payment amount\");\r\n        require(msg.sender != listing.seller, \"Seller cannot buy own item\");\r\n        \r\n        listing.status = ListingStatus.Sold;\r\n        \r\n        uint256 orderId = orderCount++;\r\n        \r\n        orders[orderId] = Order({\r\n            id: orderId,\r\n            listingId: _listingId,\r\n            buyer: payable(msg.sender),\r\n            seller: listing.seller,\r\n            charity: listing.charity,\r\n            amount: msg.value,\r\n            status: OrderStatus.AwaitingShipment,\r\n            shippedAt: 0,\r\n            deliveredAt: 0,\r\n            disputeReason: \"\"\r\n        });\r\n        \r\n        buyerOrders[msg.sender].push(orderId);\r\n        \r\n        emit ItemPurchased(orderId, _listingId, msg.sender);\r\n        return orderId;\r\n    }\r\n    \r\n    function confirmDelivery(uint256 _orderId) external onlyBuyer(_orderId) {\r\n        Order storage order = orders[_orderId];\r\n        require(order.status == OrderStatus.Shipped, \"Item not shipped yet\");\r\n        \r\n        order.status = OrderStatus.Delivered;\r\n        order.deliveredAt = block.timestamp;\r\n        \r\n        emit DeliveryConfirmed(_orderId, msg.sender);\r\n    }\r\n    \r\n    function openDispute(uint256 _orderId, string calldata _reason) external onlyBuyer(_orderId) {\r\n        Order storage order = orders[_orderId];\r\n        require(\r\n            order.status == OrderStatus.Shipped || order.status == OrderStatus.Delivered,\r\n            \"Cannot dispute at this stage\"\r\n        );\r\n        \r\n        if (order.status == OrderStatus.Delivered) {\r\n            require(\r\n                block.timestamp <= order.deliveredAt + DISPUTE_WINDOW,\r\n                \"Dispute window has passed\"\r\n            );\r\n        }\r\n        \r\n        order.status = OrderStatus.Disputed;\r\n        order.disputeReason = _reason;\r\n        \r\n        emit DisputeOpened(_orderId, msg.sender, _reason);\r\n    }\r\n    \r\n    // === FUNDS RELEASE ===\r\n    \r\n    function releaseFundsToCharity(uint256 _orderId) external {\r\n        Order storage order = orders[_orderId];\r\n        require(order.status == OrderStatus.Delivered, \"Delivery not confirmed\");\r\n        require(\r\n            block.timestamp > order.deliveredAt + DISPUTE_WINDOW,\r\n            \"Still within dispute window\"\r\n        );\r\n        \r\n        order.status = OrderStatus.Completed;\r\n        \r\n        uint256 idx = charityIndex[order.charity];\r\n        charities[idx].totalReceived += order.amount;\r\n        \r\n        _updateCharityGoals(order.charity, order.amount);\r\n        \r\n        (bool success, ) = order.charity.call{value: order.amount}(\"\");\r\n        require(success, \"Transfer to charity failed\");\r\n        \r\n        emit FundsReleasedToCharity(_orderId, order.charity, order.amount);\r\n    }\r\n    \r\n    function _updateCharityGoals(address _charity, uint256 _amount) internal {\r\n        uint256[] storage goalIds = charityGoals[_charity];\r\n        for (uint256 i = 0; i < goalIds.length; i++) {\r\n            Goal storage goal = goals[goalIds[i]];\r\n            if (goal.status == GoalStatus.Active && block.timestamp <= goal.deadline) {\r\n                goal.currentAmount += _amount;\r\n                if (goal.currentAmount >= goal.targetAmount) {\r\n                    goal.status = GoalStatus.Completed;\r\n                }\r\n                emit GoalUpdated(goalIds[i], goal.currentAmount, goal.status);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    \r\n    // === DISPUTE RESOLUTION (ADMIN) ===\r\n    \r\n    function resolveDispute(uint256 _orderId, bool _refundBuyer) external onlyAdmin {\r\n        Order storage order = orders[_orderId];\r\n        require(order.status == OrderStatus.Disputed, \"Order not disputed\");\r\n        \r\n        if (_refundBuyer) {\r\n            order.status = OrderStatus.Refunded;\r\n            \r\n            (bool success, ) = order.buyer.call{value: order.amount}(\"\");\r\n            require(success, \"Refund failed\");\r\n            \r\n            emit RefundIssued(_orderId, order.buyer, order.amount);\r\n        } else {\r\n            order.status = OrderStatus.Completed;\r\n            \r\n            uint256 idx = charityIndex[order.charity];\r\n            charities[idx].totalReceived += order.amount;\r\n            \r\n            _updateCharityGoals(order.charity, order.amount);\r\n            \r\n            (bool success, ) = order.charity.call{value: order.amount}(\"\");\r\n            require(success, \"Transfer to charity failed\");\r\n            \r\n            emit FundsReleasedToCharity(_orderId, order.charity, order.amount);\r\n        }\r\n        \r\n        emit DisputeResolved(_orderId, _refundBuyer);\r\n    }\r\n    \r\n    // === VIEW FUNCTIONS ===\r\n    \r\n    function getListing(uint256 _listingId) external view returns (\r\n        address seller,\r\n        string memory metadataURI,\r\n        uint256 price,\r\n        Category category,\r\n        ListingStatus status,\r\n        address charity\r\n    ) {\r\n        Listing storage l = listings[_listingId];\r\n        return (l.seller, l.metadataURI, l.price, l.category, l.status, l.charity);\r\n    }\r\n    \r\n    function getOrder(uint256 _orderId) external view returns (\r\n        uint256 listingId,\r\n        address buyer,\r\n        address seller,\r\n        address charity,\r\n        uint256 amount,\r\n        OrderStatus status,\r\n        uint256 shippedAt,\r\n        uint256 deliveredAt\r\n    ) {\r\n        Order storage o = orders[_orderId];\r\n        return (o.listingId, o.buyer, o.seller, o.charity, o.amount, o.status, o.shippedAt, o.deliveredAt);\r\n    }\r\n    \r\n    function getDisputeReason(uint256 _orderId) external view returns (string memory) {\r\n        return orders[_orderId].disputeReason;\r\n    }\r\n    \r\n    function getSellerListings(address _seller) external view returns (uint256[] memory) {\r\n        return sellerListings[_seller];\r\n    }\r\n    \r\n    function getBuyerOrders(address _buyer) external view returns (uint256[] memory) {\r\n        return buyerOrders[_buyer];\r\n    }\r\n    \r\n    function getCategoryName(Category _category) external pure returns (string memory) {\r\n        if (_category == Category.Clothing) return \"Clothing\";\r\n        if (_category == Category.HouseGoods) return \"House Goods\";\r\n        if (_category == Category.Electronics) return \"Electronics\";\r\n        if (_category == Category.SportsGoods) return \"Sports Goods\";\r\n        if (_category == Category.Hobbies) return \"Hobbies\";\r\n        return \"Unknown\";\r\n    }\r\n    \r\n    // === CHARITY VIEW FUNCTIONS ===\r\n    \r\n    function getCharityCount() external view returns (uint256) {\r\n        return charities.length;\r\n    }\r\n    \r\n    function getCharity(uint256 _charityId) external view returns (\r\n        address charityAddress,\r\n        string memory metadataURI,\r\n        bool isVerified,\r\n        uint256 totalReceived\r\n    ) {\r\n        Charity storage c = charities[_charityId];\r\n        return (c.charityAddress, c.metadataURI, c.isVerified, c.totalReceived);\r\n    }\r\n    \r\n    function getAllCharities() external view returns (Charity[] memory) {\r\n        return charities;\r\n    }\r\n    \r\n    // === GOAL VIEW FUNCTIONS ===\r\n    \r\n    function getGoalCount() external view returns (uint256) {\r\n        return goals.length;\r\n    }\r\n    \r\n    function getGoal(uint256 _goalId) external view returns (\r\n        address charity,\r\n        string memory metadataURI,\r\n        uint256 targetAmount,\r\n        uint256 currentAmount,\r\n        GoalStatus status,\r\n        uint256 deadline\r\n    ) {\r\n        Goal storage g = goals[_goalId];\r\n        return (g.charity, g.metadataURI, g.targetAmount, g.currentAmount, g.status, g.deadline);\r\n    }\r\n    \r\n    function getAllGoals() external view returns (Goal[] memory) {\r\n        return goals;\r\n    }\r\n    \r\n    function getCharityGoals(address _charity) external view returns (uint256[] memory) {\r\n        return charityGoals[_charity];\r\n    }\r\n    \r\n    // === ITEM REQUEST VIEW FUNCTIONS ===\r\n    \r\n    function getItemRequestCount() external view returns (uint256) {\r\n        return itemRequests.length;\r\n    }\r\n    \r\n    function getItemRequest(uint256 _requestId) external view returns (\r\n        address charity,\r\n        string memory metadataURI,\r\n        Category category,\r\n        ItemRequestStatus status,\r\n        uint256 fulfilledCount\r\n    ) {\r\n        ItemRequest storage r = itemRequests[_requestId];\r\n        return (r.charity, r.metadataURI, r.category, r.status, r.fulfilledCount);\r\n    }\r\n    \r\n    function getAllItemRequests() external view returns (ItemRequest[] memory) {\r\n        return itemRequests;\r\n    }\r\n    \r\n    function getCharityItemRequests(address _charity) external view returns (uint256[] memory) {\r\n        return charityItemRequests[_charity];\r\n    }\r\n}"
      }
    }
  }
}